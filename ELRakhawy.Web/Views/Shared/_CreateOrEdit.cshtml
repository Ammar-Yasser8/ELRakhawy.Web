@using ELRakhawy.EL.ViewModels
@model StakeholdersInfoViewModel

<form id="stakeholderForm" asp-action="@ViewBag.Action" asp-controller="StakeholdersInfo" method="post">
    @Html.AntiForgeryToken()
    @if (Model.Id > 0)
    {
        @Html.HiddenFor(m => m.Id)
    }

    <div class="row g-3">

        <!-- Name -->
        <div class="col-12">
            <label asp-for="Name" class="form-label fw-semibold">
                <i class="fas fa-building me-1 text-primary"></i> اسم الجهة
            </label>
            <input asp-for="Name" class="form-control form-control-lg" placeholder="أدخل اسم الجهة..." maxlength="200" />
            <span asp-validation-for="Name" class="text-danger small"></span>
        </div>

        <!-- Contact Numbers -->
        <div class="col-12">
            <label class="form-label fw-semibold">
                <i class="fas fa-phone me-1 text-success"></i> رقم الاتصال
            </label>
            <div class="input-group input-group-lg">
                <!-- Country Code -->
                <select class="form-select" asp-for="CountryCode" style="max-width: 140px;">
                    <option value="+20" selected>🇪🇬 +20</option>
                    <option value="+966">🇸🇦 +966</option>
                    <option value="+971">🇦🇪 +971</option>
                    <option value="+965">🇰🇼 +965</option>
                    <option value="+974">🇶🇦 +974</option>
                    <option value="+44">🇬🇧 +44</option>
                    <option value="+1">🇺🇸 +1</option>
                </select>

                <!-- Phone number -->
                <input asp-for="ContactNumber" class="form-control form-control-lg" placeholder="123456789" />
            </div>
            <small class="text-muted">اختر كود الدولة ثم أدخل رقم الهاتف</small>
            <span asp-validation-for="ContactNumber" class="text-danger small"></span>
        </div>

        <!-- Is Active -->
        <div class="col-12">
            <label class="form-label fw-semibold">
                <i class="fas fa-toggle-on me-1 text-success"></i> الحالة
            </label>
            <div class="form-check form-switch">
                <input asp-for="Status" class="form-check-input" type="checkbox" id="IsActiveSwitch">
                <label class="form-check-label" for="IsActiveSwitch">
                    @(Model.Status ? "نشط" : "غير نشط")
                </label>
            </div>
        </div>

        <!-- Comment -->
        <div class="col-12">
            <label asp-for="Comment" class="form-label fw-semibold">
                <i class="fas fa-comment-dots me-1 text-secondary"></i> ملاحظات
            </label>
            <textarea asp-for="Comment" rows="3" class="form-control form-control-lg" placeholder="أدخل ملاحظات إضافية..."></textarea>
            <span asp-validation-for="Comment" class="text-danger small"></span>
        </div>

        <!-- Stakeholder Types -->
        <div class="col-12">
            <label class="form-label fw-semibold">
                <i class="fas fa-tags me-1 text-info"></i> أنواع الجهة
            </label>
            <div class="row">
                @foreach (var type in Model.AvailableTypes)
                {
                    <div class="col-md-6 mb-2">
                        <div class="form-check">
                            <input class="form-check-input type-checkbox"
                                   type="checkbox"
                                   name="SelectedTypeIds"
                                   value="@type.Id"
                                   id="type_@type.Id"
                                   @(Model.SelectedTypeIds.Contains(type.Id) ? "checked" : "") />
                            <label class="form-check-label" for="type_@type.Id">@type.Type</label>
                        </div>
                    </div>
                }
            </div>
            <span asp-validation-for="SelectedTypeIds" class="text-danger small"></span>
        </div>

        <!-- Primary Type -->
        <div class="col-12" id="primaryTypeSection">
            <label class="form-label fw-semibold">
                <i class="fas fa-star text-warning me-1"></i> النوع الرئيسي
            </label>
            <select asp-for="PrimaryTypeId" class="form-select form-select-lg" id="primaryTypeSelect">
                <option value="">-- اختر النوع الرئيسي --</option>
                @foreach (var type in Model.AvailableTypes)
                {
                    <option value="@type.Id" @@(Model.PrimaryTypeId == type.Id ? "selected" : "")>@type.Type</option>
                }
            </select>
            <span asp-validation-for="PrimaryTypeId" class="text-danger small"></span>
        </div>

    </div>

    <!-- Buttons -->
    <div class="d-flex justify-content-end gap-2 mt-4">
        <button type="submit" class="btn btn-success btn-lg">
            <i class="fas fa-save me-1"></i> حفظ
        </button>
        <button type="button" class="btn btn-secondary btn-lg" data-bs-dismiss="modal">
            <i class="fas fa-times me-1"></i> إلغاء
        </button>
    </div>
</form>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <!-- Add to your layout or view -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    
}
<style>
    /* Arabic Popup Styles */
    .arabic-popup {
        direction: rtl;
        text-align: right;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

        .arabic-popup .swal2-title {
            direction: rtl;
            text-align: right;
            font-weight: 700;
        }

        .arabic-popup .swal2-content {
            direction: rtl;
            text-align: right;
        }

    .arabic-popup-content {
        direction: rtl;
    }

        .arabic-popup-content .row {
            margin: 0;
        }

        .arabic-popup-content .col-4 {
            text-align: left;
        }

        .arabic-popup-content .col-8 {
            text-align: right;
        }

    /* RTL Support for SweetAlert */
    .swal2-popup.swal2-rtl .swal2-title {
        text-align: right;
    }

    .swal2-popup.swal2-rtl .swal2-content {
        text-align: right;
    }

    .swal2-popup.swal2-rtl .swal2-actions {
        flex-direction: row-reverse;
    }
</style>
<style>
    /* Enhanced form styling */
    .form-check:hover {
        background-color: rgba(0,123,255,0.05);
        border-radius: 4px;
    }
    
    .form-check-input:checked {
        background-color: #0d6efd;
        border-color: #0d6efd;
    }
    
    .is-invalid {
        border-color: #dc3545 !important;
    }
    
    .text-danger {
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }
    
    #primaryTypeSection {
        transition: all 0.3s ease;
    }
    
    .form-select option:disabled {
        color: #6c757d;
    }
</style>